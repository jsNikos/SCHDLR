<!DOCTYPE html>
<html>

<head>
	<meta charset="utf8">
	<title>Labor Scheduler</title>

	<link rel="stylesheet" type="text/css" href="../commons/libs/jQuery-ui/jquery-ui-1.10.4.custom.css" />
	<link rel="stylesheet" type="text/css" href="../commons/libs/jquery-foodtec-ui/jquery.foodtec.ui.css" />
	<link rel="stylesheet" type="text/css" href="../commons/libs/jquery-ui-timepicker/jquery.ui.timepicker.css" />
	<link rel="stylesheet" type="text/css" href="main.css" />

	<script type="text/javascript" src="/webfile?name=modernizr.js"></script>

	<script type="text/javascript" src="../commons/libs/jquery.js"></script>
	<script type="text/javascript" src="js/libs/jquery-migrate-1.2.1.min.js"></script>

	<script type="text/javascript" src="js/Utils.js"></script>
	<script type="text/javascript">
		scheduler.Utils.authIfRequired();
	</script>

	<!-- this enhances the schedule -global by a hash of release version -->
	<script src="/ws/webScheduler/findReleaseVersionHash"></script>

	<script type="text/javascript" src="../commons/libs/require.js"></script>
	<script type="text/javascript" src="main.js"></script>

</head>

<body>

	<div id="app">
		<timeline v-bind:model="model"></timeline>
	</div>


	<script type="text/javascript" src="../commons/libs/jQuery-ui/jquery-ui-1.10.4.custom.min.js"></script>
	<script type="text/javascript" src="../commons/libs/jquery-foodtec-ui/jquery.foodtec.ui.js"></script>
	<script type="text/javascript" src="../commons/libs/jquery-ui-timepicker/jquery.ui.timepicker.js"></script>
	<script type="text/javascript" src="../commons/libs/jquery.parsequery.js"></script>
	<script type="text/javascript" src="../commons/libs/jquery.tinysort.min.js"></script>
	<script type="text/javascript" src="../commons/libs/lodash.js"></script>
	<script type="text/javascript">
		window.lodash = _.noConflict();
	</script>

	<script type="text/javascript">
		jQuery(function() {
			//TODO request for shift-editor data and enhance with 'timeSlots'
			// the timeline-component will be bound against this model
			// timeSlot: {shiftId, unavailId}
			// render timeline as floating divs
			var model = {
				timeSlots: []
			};

			for (var i = 0; i <= 93; i++) {
				model.timeSlots.push({
					id: i,
					starttime: Date.now(),
					endtime: Date.now(),
					label: i + ':' + i,
					shift: undefined,
					shiftStarts: undefined,
					shiftEnds: undefined,
					unavails: []
				});
			}

			// setInterval(function(){
				// model.timeSlots[77].shift = {};
				// model.timeSlots[77].shiftStarts = true;
				// model.timeSlots[90].shift = {};
				// model.timeSlots[90].shiftEnds = true;
			// }, 5000);

			require(['TimelineComponent', 'vue'], function(TimelineComponent, Vue) {				
				new Vue({
					el: '#app',
					data: {
						model: model
					},
					components: {
						'timeline': new TimelineComponent()
					}
				});

			});

		});
	</script>



</body>

</html>
